(this.webpackJsonpprogramari=this.webpackJsonpprogramari||[]).push([[0],{152:function(e,t,a){e.exports=a(303)},157:function(e,t,a){},158:function(e,t,a){},163:function(e,t,a){},211:function(e,t){},224:function(e,t,a){},297:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),l=a.n(o),c=(a(157),a(158),a(100),a(11)),i=[0,800,830,900,930,1e3,1030,1100,1130,1200,1230,1300,1330,1400,1430,1500,1530,1600,1630,1700,1730,1800,1830,1900,1930],d=a(136),s=a.n(d),u=a(135),m=a.n(u),g=(a(163),a(46)),p=a.n(g),f="SELECT_PROGRAMARE",E="HANDLE_FORM_CHANGE",b="SELECT_DATE",h="SELECT_EDIT_DATE",v="FETCH_PROGRAMARI_SUCCESS",y="FETCH_PROGRAMARI_STARTED",O="FETCH_EDIT_PROGRAMARI_SUCCESS",w="FETCH_EDIT_PROGRAMARI_STARTED",D="ADD_PROGRAMARE_SUCCESS",C="ADD_PROGRAMARE_STARTED",S="DELETE_PROGRAMARE_STARTED",j="DELETE_PROGRAMARE_SUCCESS",R="TOGGLE_ADD_MODAL",P="ADD_HOURS_ARRAY",A="USER_LOGGING_STARTED",N="USER_LOGGING_SUCCESS",T="USER_LOGGING_ERROR",_="LOGGING_OUT",x="SET_PROGRAMARI",I="SET_PROGRAMARI_EDIT",k="SET_ERROR",G=a(12),H=a.n(G),M=function(e){e?p.a.defaults.headers.common.Authorization=e:delete p.a.defaults.headers.common.Authorization},F=a(60),L=a.n(F),U=a(61),z=a.n(U),B=z.a.connect("http://localhost:3001");function W(e){return localStorage.removeItem("jwtToken"),M(!1),{type:_,payload:e}}function V(e){return{type:R,payload:e}}function Y(e){return function(t){t({type:S}),B.emit("deleteItems",e)}}function J(e){return{type:b,payload:e}}function X(e){return function(t){t({type:y});var a=H()(e).format("DDMMY");B.emit("fetchItems",a)}}var $=Object(c.b)((function(e){return{programari:e.programari,selectedDate:e.selectedDate}}),(function(e){return{deleteProgramare:function(t){return e(Y(t))},toggleAddModal:function(t){return e(V(t))},setProgramari:function(t){return e({type:x,payload:t})},setProgramariEdit:function(t){return e({type:I,payload:t})},fetchProgramari:function(t){return e(X(t))},selectDate:function(t){return e(J(t))}}}))((function(e){Object(r.useEffect)((function(){e.fetchProgramari(e.selectedDate);var t=z.a.connect("http://localhost:3001");t.on("dataFetch",(function(t){e.setProgramari(t)})),t.on("refresh",(function(t){var a=H()(t,"DDMMY").format(),r=new Date(a);e.fetchProgramari(a),e.selectDate(r)})),t.on("dataFetchEdit",(function(t){e.setProgramariEdit(t)})),t.on("error",(function(e){document.write("Error: ".concat(e," <br />"))})),t.on("connect_error",(function(e){document.write("Eroare la conexiune. Reincercati. <br />")})),t.on("connect_timeout",(function(e){document.write("Conexiunea a expirat. <br />")})),t.on("reconnect",(function(){window.location.reload(!0)}))}),[]);var t=e.programari,a=e.selectedDate,o=e.deleteProgramare,l=t.map((function(t){var r=i.indexOf(Number(t.ora))+1,l=Number(t.cabinet)+1,c=t.durata,d="bg-".concat(t.medic),u=function(e){switch(e){case"red":return"dr. A";case"green":return"dr. B";case"blue":return"dr. C";default:return"no medic"}}(t.medic),g={},p={},f={};return"1"===c?(p={bottom:"0.5rem"},g={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridGap:"1px",marginTop:"-3px",alignContent:"center",height:"100%"}):"2"===c?(g={alignContent:"center",marginTop:"-3px",display:"grid",gridTemplateColumns:"50% 50%",height:"100%"},f={gridColumn:"1 / span 2"}):g={display:"flex",flexDirection:"column",marginTop:"-3px",justifyContent:"center",height:"100%"},n.a.createElement("div",{id:"".concat(t.index),key:"".concat(t.index),className:"programare pt1 tc dib black-90 shadow-4 ".concat(d),style:{gridColumn:l,gridRow:"".concat(r," / span ").concat(c),zIndex:"9"}},n.a.createElement("div",{style:g},n.a.createElement("span",{style:{textOverflow:"hidden",height:"1rem",overflow:"hidden"}},t.nume," ",t.prenume),n.a.createElement("span",null,t.telefon),n.a.createElement("span",{style:f},u)),n.a.createElement("div",{className:"editIcon",style:p},n.a.createElement(m.a,{onClick:function(){return a=t,void e.toggleAddModal(Object.assign({},a,{edit:!0,editDate:a.selectedDate,editCabinet:a.cabinet,cabinet:""}));var a}})),n.a.createElement("div",{className:"deleteIcon",style:p},n.a.createElement(s.a,{onClick:function(){return function(e){var t=Object.assign({},{selectedDate:a},{id:e});o(t)}("".concat(t.index))}})))}));return n.a.createElement(n.a.Fragment,null,l)})),q=a(326),K=a(137),Q=a.n(K),Z=(a(224),a(62)),ee=a.n(Z),te=(a(127),a(63)),ae=a.n(te),re=Object(c.b)((function(e){return{selectedDate:e.selectedDate}}),(function(e){return{selectDate:function(t){return e(J(t))},fetchProgramari:function(t){return e(X(t))}}}))((function(e){return n.a.createElement("div",{className:"datePickerWrapper"},n.a.createElement(ee.a,{localeUtils:ae.a,locale:"ro",selectedDays:e.selectedDate,onDayClick:function(t){return function(t){e.selectDate(t),e.fetchProgramari(t)}(t)},disabledDays:{daysOfWeek:[0,6]}}))})),ne=a(321),oe=a(322),le=a(139),ce=a.n(le),ie=Object(c.b)(null,(function(e){return{toggleAddModal:function(t){return e(V(t))},loggingOut:function(t){return e(W(t))}}}))((function(e){var t={nume:"",prenume:"",telefon:""};return n.a.createElement("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#357edd",height:"100%",width:"auto",zIndex:"10"},className:"shadow-5"},n.a.createElement("div",{style:{backgroundColor:"#fafafa",borderRadius:"10%",zIndex:"20",height:"max-content"},className:"ma4 pa3 shadow-3"},n.a.createElement(re,null)),n.a.createElement(ne.a,{style:{position:"absolute",padding:"1.5rem",bottom:"0",left:"0",width:"23rem",height:"2rem",color:"#fafafa",letterSpacing:"2px",zIndex:"20"},onClick:e.loggingOut},"Log out"),n.a.createElement(oe.a,{"aria-label":"add",style:{position:"absolute",top:"1rem",left:"21rem",backgroundColor:"#74adff",color:"white",width:"4rem",height:"4rem",zIndex:"20"},onClick:function(){return e.toggleAddModal(t)}},n.a.createElement(ce.a,{style:{fontSize:"2.5rem"}})))})),de=a(33),se=a(28),ue=a(41),me=a(48),ge=a(49),pe=a(74);a(294),a(133),a(295),a(296),a(297),a(298);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Ee=Object(c.b)((function(e){return{programari:e.programari,selectedProgramare:e.selectedProgramare,modalState:e.modalState,selectedDate:e.selectedDate,adding:e.adding,programariEdit:e.programariEdit,hoursArray:e.hoursArray}}),(function(e){return{addProgramare:function(t){return e((a=t,function(e){e({type:C}),B.emit("addItems",a)}));var a},fetchProgramari:function(t){return e(X(t))},fetchEditProgramari:function(t){return e((a=t,function(e){e({type:w});var t=H()(a).format("DDMMY");B.emit("fetchEditItems",t)}));var a},handleFormChange:function(t){return e({type:E,payload:t})},toggleAddModal:function(t){return e(V(t))},deleteProgramare:function(t){return e(Y(t))}}}))((function(e){var t=Object(r.useState)(new Date),a=Object(ue.a)(t,2),o=a[0],l=a[1],c=Object(r.useState)([]),d=Object(ue.a)(c,2),s=d[0],u=d[1];Object(r.useEffect)((function(){e.fetchEditProgramari(e.selectedDate);var t=new Date(e.selectedDate);l(t)}),[e.selectedDate]);var m=e.selectedProgramare,g=m.nume,p=m.prenume,f=m.ora,E=m.durata,b=m.medic,h=m.cabinet,v=void 0===g||""===g||void 0===p||""===p||void 0===f||""===f||void 0===E||void 0===b||void 0===h||""===h,y=function(t){var a=t.target.id,r=t.target.value,n=Object(se.a)({},a,r);e.handleFormChange(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n))},O=function(){var t=e.selectedProgramare,a="".concat(t.cabinet).concat(H()(t.ora,"Hmm").format("HHmm"));t=Object.assign({},t,{index:a,selectedDate:o}),e.handleFormChange({index:a}),e.addProgramare(t),e.toggleAddModal(t),u([])},w=e.modalState,D=e.toggleAddModal,C=e.selectedProgramare;return n.a.createElement("div",null,n.a.createElement(me.b,{open:w,toggle:function(){return D(C)},size:"lg"},n.a.createElement(me.d,null,"Programare"),n.a.createElement(me.c,{style:{padding:"0"}},n.a.createElement("div",{className:"addAppointmentForm pv5"},n.a.createElement("div",null,n.a.createElement(ee.a,{localeUtils:ae.a,locale:"ro",selectedDays:o,onDayClick:function(t){return function(t){l(t),e.handleFormChange({cabinet:""}),e.fetchEditProgramari(t)}(t)},disabledDays:{daysOfWeek:[0,6]}})),n.a.createElement("div",{className:"flex flex-row",style:{width:"min-content"}},n.a.createElement("div",null,n.a.createElement("div",{className:"ma2 mb3"},n.a.createElement(pe.InputText,{id:"nume",placeholder:"Nume",value:C.nume,onChange:y,style:{width:"200px"}})),n.a.createElement("div",{className:"ma2 mb3"},n.a.createElement(pe.InputText,{id:"prenume",placeholder:"Prenume",value:C.prenume,onChange:y,style:{width:"200px"}})),n.a.createElement("div",{className:"ma2 mb3"},n.a.createElement(pe.InputText,{id:"telefon",placeholder:"Telefon",value:C.telefon,onChange:y,style:{width:"200px"}}))),n.a.createElement("div",null,n.a.createElement(ge.Dropdown,{id:"medic",value:C.medic,options:[{label:"Dr. A",value:"red"},{label:"Dr. B",value:"green"},{label:"Dr. C",value:"blue"}],onChange:y,placeholder:"Alege medicul",className:"ma2",style:{width:"200px"}}),n.a.createElement(ge.Dropdown,{id:"cabinet",value:C.cabinet,options:[{label:"Cabinet 1",value:"1"},{label:"Cabinet 2",value:"2"},{label:"Cabinet 3",value:"3"}],onChange:function(t){y(t),function(t){e.handleFormChange({ora:""});var a=[],r=[0],n=[];if(e.programariEdit.map((function(e){if(t===e.cabinet)for(var a=H()(e.ora,"Hmm").format("HH:mm"),n=0;n<e.durata;n++){var o=H()(a,"HH:mm").add(.5*n,"h").format("Hmm");r=r.concat(Number(o))}return null})),C.edit){a=[];for(var o=0;o<C.durata;o++)a.push(Number(H()(C.ora,"Hmm").add(.5*o,"h").format("HHmm")));var l=new Set(a);a=Object(de.a)(new Set(Object(de.a)(r).filter((function(e){return!l.has(e)}))))}var c=new Set(r);Object(de.a)(new Set(Object(de.a)(i).filter((function(e){return!c.has(e)})))).map((function(e){var t={label:H()(e,"Hmm").format("HH:mm"),value:H()(e,"Hmm").format("Hmm")};return n.push(t),null})),u(n)}(t.target.value)},placeholder:"Alege cabinetul",className:"ma2",style:{width:"200px"}}),n.a.createElement(ge.Dropdown,{id:"ora",value:C.ora,options:s,onChange:y,placeholder:"Alege ora",className:"ma2",style:{width:"200px"}}),n.a.createElement(ge.Dropdown,{id:"durata",value:C.durata,options:[{label:"30 min",value:"1"},{label:"1 ora",value:"2"},{label:"1 ora si 30 min",value:"3"},{label:"2 ore",value:"4"}],onChange:y,placeholder:"Alege durata",className:"ma2",style:{width:"200px"}})))),n.a.createElement(me.a,{style:{position:"absolute",right:"20px",bottom:"20px"},disabled:v,onClick:function(){e.selectedProgramare.edit?(!function(){var t=e.selectedProgramare,a=t.editDate,r=t.index,n=Object.assign({},{selectedDate:a},{id:r});e.deleteProgramare(n)}(),setTimeout((function(){return O()}),100),setTimeout((function(){return e.fetchEditProgramari(e.selectedDate)}),100)):(O(),setTimeout((function(){return e.fetchEditProgramari(e.selectedDate)}),100))}},"Save"))))})),be=(a(299),function(){var e=i.map((function(e,t){return n.a.createElement(n.a.Fragment,{key:"fragment".concat(t)},n.a.createElement("div",{className:"trBackground",style:{display:"table",width:"100%"}},n.a.createElement("div",{className:"tableBackground",style:{width:"10%",height:"2rem"}}," "),n.a.createElement("div",{className:"tableBackground",style:{width:"30%"}}," "),n.a.createElement("div",{className:"tableBackground",style:{width:"30%"}}," "),n.a.createElement("div",{className:"tableBackground",style:{width:"30%"}}," ")))}));return n.a.createElement(n.a.Fragment,null,e)}),he=(a(300),function(){var e=i.map((function(e){var t="";return t=0===e?null:H()(e,"Hmm").format("HH:mm"),n.a.createElement(n.a.Fragment,{key:e},n.a.createElement("div",{style:{backgroundColor:"rgba(0,0,0,0)"},className:"hourWrapper overflow-hidden tc"},n.a.createElement("p",{style:{padding:"0px",margin:"0px",display:"table-cell",verticalAlign:"middle"}},t)))}));return n.a.createElement(n.a.Fragment,null,e)}),ve=a(146),ye=a.n(ve),Oe=Object(c.b)((function(e){return{loading:e.loading,error:e.error,errorContent:e.errorContent}}))((function(e){if(e.error){var t=e.errorContent.map((function(e){return n.a.createElement("p",null,e.toString())}));return console.log(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SERVER),n.a.createElement("div",null,t)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(q.a,null),n.a.createElement(Q.a,{active:e.loading,spinner:!0},n.a.createElement("div",{className:"appWrapper flex flex-wrap"},n.a.createElement(ie,null),n.a.createElement(oe.a,{className:"",style:{backgroundColor:"#74adff",color:"white",position:"absolute",top:"1rem",right:"2rem",height:"auto",width:"auto"},onClick:function(){return e.fetchProgramari(e.selectedDate)}},n.a.createElement(ye.a,{className:"ma2",style:{fontSize:"2.5rem"}})),n.a.createElement("div",{className:"tableWrapper"},n.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:"1",marginTop:"1.95rem"}},n.a.createElement(be,null)),n.a.createElement(he,null),n.a.createElement("div",{className:"f4 tc",style:{padding:"1.1rem",gridColumnStart:"2",gridRowStart:"1"}},"Cabinetul 1"),n.a.createElement("div",{className:"f4 tc",style:{padding:"1.1rem",gridColumnStart:"3",gridRowStart:"1"}},"Cabinetul 2"),n.a.createElement("div",{className:"f4 tc",style:{padding:"1.1rem",gridColumnStart:"4",gridRowStart:"1"}},"Cabinetul 3"),n.a.createElement($,null)),n.a.createElement(Ee,null))))})),we=(a(301),a(3)),De=a.n(we),Ce=a(324),Se=Object(c.b)((function(e){return{loginErrors:e.loginErrors}}),(function(e){return{userLogging:function(t){return e((a=t,function(e){e({type:A}),p.a.post("http://localhost:3001/api/users/login",a).then((function(t){var a=t.data.token;localStorage.setItem("jwtToken",a),M(a);var r=L()(a);e({type:N,payload:r})})).catch((function(t){return e({type:T,payload:t.response.data})}))}));var a}}}))((function(e){var t=Object(r.useState)(""),a=Object(ue.a)(t,2),o=a[0],l=a[1],c=Object(r.useState)(""),i=Object(ue.a)(c,2),d=i[0],s=i[1],u=e.userLogging,m=e.loginErrors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(q.a,null),n.a.createElement("div",{className:"loginPageBackground"},n.a.createElement("div",{className:"loginForm pa4 shadow-3"},n.a.createElement("div",null,n.a.createElement("p",{className:"tc f3",style:{letterSpacing:"1.5px"}},"Login"),n.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),u({email:o,password:d})}},n.a.createElement("div",null,n.a.createElement(Ce.a,{value:o,placeholder:"Email",error:m.email,id:"email",type:"email",className:De()("pa1",{invalid:m.email||m.emailnotfound}),style:{width:"25vw"},onChange:function(e){l(e.target.value)}}),n.a.createElement("p",{className:"red"},m.email,m.emailnotfound)),n.a.createElement("div",null,n.a.createElement(Ce.a,{onChange:function(e){return s(e.target.value)},placeholder:"Password",value:d,error:m.password,id:"password",type:"password",className:De()("pa1",{invalid:void 0!==m.password||void 0!==m.passwordincorrect}),style:{width:"25vw"}}),n.a.createElement("p",{className:"red"},m.password,m.passwordincorrect)),n.a.createElement("div",{className:"tr",style:{paddingLeft:"11.250px"}},n.a.createElement(ne.a,{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"tc"},"Login")))))))})),je=Object(c.b)((function(e){return{loggedIn:e.loggedIn}}),(function(e){return{loggingOut:function(t){return e(W(t))},setUser:function(t){return e({type:N,payload:t})}}}))((function(e){if(localStorage.jwtToken){var t=localStorage.jwtToken;M(t);var a=L()(t);e.setUser(a);var r=Date.now()/1e3;a.exp<r&&e.loggingOut()}return e.loggedIn?n.a.createElement(Oe,null):n.a.createElement(Se,null)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(302);var Re=a(39),Pe={modalState:!1,deleting:!1,adding:!1,loading:!0,selectedDate:new Date,formChange:{},selectedProgramare:{nume:"",prenume:"",telefon:""},programari:[],loggedIn:!1,loginErrors:{},programariEdit:[],error:!1};var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch("undefined"===typeof e&&(e=Pe),t.type){case _:return Object.assign({},e,{loggedIn:!1});case h:return Object.assign({},e,t.payload);case R:return void 0!==t.payload?Object.assign({},e,{selectedProgramare:t.payload},{modalState:!e.modalState}):Object.assign({},e,{modalState:!e.modalState});case A:return Object.assign({},e,t.payload);case N:return Object.assign({},e,{loggedIn:!0});case T:return Object.assign({},e,{loginErrors:t.payload});case S:return Object.assign({},e,{deleting:!0});case j:return Object.assign({},e,{deleting:!1});case C:return Object.assign({},e,{adding:!0});case f:return Object.assign({},e,{selectedProgramare:t.payload});case E:var a=e.selectedProgramare,r=Object.assign({},a,t.payload);return Object.assign({},e,{selectedProgramare:r});case b:return Object.assign({},e,{selectedDate:t.payload});case v:return Object.assign({},e,{programari:t.payload},{loading:!1});case y:return Object.assign({},e,{loading:!0});case O:return Object.assign({},e,{programariEdit:t.payload});case w:return Object.assign({},e);case P:var n=Object.assign({},e,{hoursArray:""});return Object.assign({},n,{hoursArray:t.payload});case D:return Object.assign({},e,{adding:!1});case k:return Object.assign({},e,{error:!0,errorContent:t.payload});case x:return Object.assign({},e,{programari:t.payload},{loading:!1});case I:return Object.assign({},e,{programariEdit:t.payload});default:return e}},Ne=a(147),Te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.c,_e=Object(Re.d)(Ae,Te(Object(Re.a)(Ne.a)));M(localStorage.getItem("jwtToken")),l.a.render(n.a.createElement(c.a,{store:_e},n.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[152,1,2]]]);
//# sourceMappingURL=main.f0d778a6.chunk.js.map